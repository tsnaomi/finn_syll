{% extends 'base.html' %}

{% block head %}
<link href='//fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
{% endblock %}

{% block body %}
{{ modal() }}
<br>
<br>
<br>
<div>
    <form class='search' method='POST'>
        <input type='hidden' name='_csrf_token' value='{{ csrf_token() }}'>
        <input type='text' name='search' class='search clear' placeholder="type in a {% if kw == 'find' %}word{% else %}sequence{% endif %}..." {% if find %}value={{ find }}{% endif %}> 
        <input type='submit' class='search clear' value={% if kw == 'find' %}'FIND'{% else %}'CONTAINS'{% endif %}>
    </form>
</div>
<br>
<br>
{% if results != none %}
{% if results %}
<div class='tokens container'>
    <!-- contains -->
    {% if kw == 'contains' %}
    <div class='contains'>
        <div class='count'>Words containing <i>{{ find }}</i> sequences ({{ count }} matches).</div>
        <br>
        {{ tokenify(results, inline=False ) }}
    </div>
    <!-- find -->
    {% else %}
    <div class='find'>
        {% for t in results %}
        <span class='attr-orth'>{{ t.orth }}</span>
        <br>
        <span class='attr-label'>test</span>
        <a data-toggle='modal' data-target='#modal' onclick="{{ populate(t) }}" class='{{ t|goldclass }}{% if t.is_compound %} compound{% endif %}'>{{ t.test_syll }}</a>
        <br>
        {% if t.syll %}
        <span class='attr-label'>gold</span> {{ t.syll }}
        <br>
        {% endif %}
        {% if t.alt_syll1 %}
        <span class='attr-label'>alt</span> {{ t.alt_syll1 }}
        <br>
        {% endif %}
        {% if t.alt_syll2 %}
        <span class='attr-label'>alt</span> {{ t.alt_syll2 }}
        <br>
        {% endif %}
        {% if t.alt_syll3 %}
        <span class='attr-label'>alt</span> {{ t.alt_syll3 }}
        <br>
        {% endif %}
        <span class='attr-label'>rules</span> {{ t.rules }}
        <br>
        <span class='attr-label'>pos</span> {{ t.pos }}
        <br>
        <span class='attr-label'>msd</span> {{ t.msd }}
        <br>
        <span class='attr-label'>lemma</span> {{ t.lemma }}
        <br>
        <br>
        {% else %}
        <span class='message'>No matches found.</span>
        {% endfor %}
    </div>
    {% endif %}
</div>
<br>
{% else %}
<span class='message'>No matches found.</span>
{% endif %}
{% endif %}
{% endblock %}

{% block footer %}
<script>
    function populatemodal(find, orth, gold, test, rules, syll, alt1, alt2, alt3, compound, stopword) {
        $('#orth').val(orth);
        $('#test').val(test);
        $('#test').addClass(gold);
        $('#rules').val(rules);
        $('#syll').val(syll);
        $('#alt1').val(alt1);
        $('#alt2').val(alt2);
        $('#alt3').val(alt3);
        $('#find').val(find);
        if (compound == 'checked') {
            $('#compound').prop('checked', true);
        };
        if (stopword == 'checked') {
            $('#stopword').prop('checked', true);
        };
    }
</script>
{% endblock %}
